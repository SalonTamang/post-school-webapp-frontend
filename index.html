<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coursework1 | Web Development with Vue.js</title>
    <!-- adding bootstrap for design -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <!-- adding vue.js script to page -->
    <script src="https://unpkg.com/vue@2.7.8/dist/vue.js"></script>
    <!-- adding font awesome for icons -->
    <script src="https://kit.fontawesome.com/c8521bd5d1.js" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="style.css">

</head>
<body>
    <div id="app">
        <nav class="toolbar-container">
            <center><h1 style="font-size: 2rem;" v-text="sitename"></h1></center>
            <!-- search bar -->
            <div>
                <label for="search">
                    <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M15.75 15.75L12.3855 12.3795L15.75 15.75ZM14.25 7.875C14.25 9.56576 13.5784 11.1873 12.3828 12.3828C11.1873 13.5784 9.56576 14.25 7.875 14.25C6.18424 14.25 4.56274 13.5784 3.36719 12.3828C2.17165 11.1873 1.5 9.56576 1.5 7.875C1.5 6.18424 2.17165 4.56274 3.36719 3.36719C4.56274 2.17165 6.18424 1.5 7.875 1.5C9.56576 1.5 11.1873 2.17165 12.3828 3.36719C13.5784 4.56274 14.25 6.18424 14.25 7.875V7.875Z" stroke="#00577C" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    <input class="bg-white rounded border-0 p-2" type="search" v-model="searchQuery" placeholder="Search products" v-on:input="searchProducts(searchQuery)">
                </label>
            </div>
            <!-- checkbutton -->
            <div id="checkOutContainer">
                <button v-on:click="showCheckout" v-if="showCheckoutButton" class="btn">
                    <!-- 'cartItemCount' is used the same way as a data property. -->
                    {{ cartItemCount }}
                    <!-- add the cart icon -->
                    <span class="fas fa-cart-plus"></span> Checkout
                </button>
                <button v-else disabled>
                {{ cartItemCount }}
                    <!-- add the cart icon -->
                    <span class="fas fa-cart-plus"></span> Checkout
                </button>
            </div>
        </nav>

        
        <section class="d-flex mt-5 mb-5">
            <div class="sortContainer flex-shrink-1 p-4">
                <!-- Sorting -->
                <b>Sort By</b>
                <hr>
                <span class="btn" v-on:click="filterSelection('title')"> Title</span>
                <span class="btn" v-on:click="filterSelection('price')"> Price</span>
                <span class="btn" v-on:click="filterSelection('availability')"> Availability</span>
                <span class="btn" v-on:click="sortSelection('asc')"> Ascending <i class="fa-solid fa-arrow-up"></i></span>
                <span class="btn" v-on:click="sortSelection('desc')"> Descending <i class="fa-solid fa-arrow-down"></i></span> 
            <!-- Main page view -->
            </div>
            <div class="flex-grow-2" v-if="showProduct">
                <div class="d-flex " v-for="product in products">
                    <div class="row mb-3 justify-content-center">
                        <div class="rounded bg-white col-md-10 p-3">
                            <div class="w-100 d-flex justify-content-between col-md-6">
                                <div class="images">
                                    <div class="text-center p-2"> <img id="main-image" style="object-fit: cover;" v-bind:src="product.image" width="300"/> </div>
                                </div>
                        
                                <div class="p-1">
                                    <div class="mb-3">
                                        <h5 class="text-uppercase" v-html="product.title"></h5>
                                        <div class="d-flex flex-row align-items-center"> <p><b><span class="act-price">${{product.price}}</span></b><span style="font-size: 13px;"> [{{product.available}} items]</span></p></div>
                                    </div>
                                    <p v-text="product.description"></p>
                                    <!-- add to cart button -->
                                    <div class="mt-4 align-items-center">
                                        <button v-on:click="addToCart(product)" v-if="canAddToCart(product)" class="btn btn-danger text-uppercase mr-2 px-4">Add to cart</button>
                                        <button class="btn btn-secondary" @click="removeFromCart(product)" v-show="showRemoveButton(product)">Remove from cart</button>
                                        <!-- This button will be displayed otherwise -->
                                        <div v-else>
                                            <button class="btn btn-danger text-uppercase mr-2 px-4" disabled>Add to cart</button>
                                            <span>No more items available</span>
                                        </div>
                                        
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- checkout page -->
        </section>
    </div>
    <!-- vue.js script for application -->
    <script type="text/javascript">
        var webstore = new Vue({
            el:"#app",
            data:{
                showProduct:true,
                sitename:"After School",
                products: [
                    {
                        id: 1,
                        title: "<b>Maths Set,</b>",
                        description: "Protractor, set squares, eraser and so on, Clear color allows you to see the words, letters, and figures on page through the protractor & Convenient for organized and carry in transparent box.",
                        price: 20,
                        image: "images/geometry_box.jpg",
                        available:10
                    },
                    {
                        id: 2,
                        title: "<b>Maths Set, Geometry Compasses Set 8pcs School Protractor Rulers Set Squares for Maths Learning Home Schooling in Carry Case</b>",
                        description: "Handy and easy to apply; Helpful tools for drawing circles, Drawing Compass suits for your needs; box of refill, protractor, set squares, eraser and so on, Clear color allows you to see the words, letters, and figures on page through the protractor & Convenient for organized and carry in transparent box.",
                        price: 30,
                        image: "images/geometry_box.jpg",
                        available:7
                    },
                    {
                        id: 3,
                        title: "<b>Maths Set, Geometry Compasses Set 8pcs School Protractor Rulers Set Squares for Maths Learning Home Schooling in Carry Case</b>",
                        description: "Handy and easy to apply; Helpful tools for drawing circles, Drawing Compass suits for your needs; box of refill, protractor, set squares, eraser and so on, Clear color allows you to see the words, letters, and figures on page through the protractor & Convenient for organized and carry in transparent box.",
                        price: 15,
                        image: "images/geometry_box.jpg",
                        available:39
                    },
                    {
                        id: 4,
                        title: "<b>Maths Set, Geometry Compasses Set 8pcs School Protractor Rulers Set Squares for Maths Learning Home Schooling in Carry Case</b>",
                        description: "Handy and easy to apply; Helpful tools for drawing circles, Drawing Compass suits for your needs; box of refill, protractor, set squares, eraser and so on, Clear color allows you to see the words, letters, and figures on page through the protractor & Convenient for organized and carry in transparent box.",
                        price: 45,
                        image: "images/geometry_box.jpg",
                        available:17
                    },
                    {
                        id: 5,
                        title: "<b>Maths Set, Geometry Compasses Set 8pcs School Protractor Rulers Set Squares for Maths Learning Home Schooling in Carry Case</b>",
                        description: "Handy and easy to apply; Helpful tools for drawing circles, Drawing Compass suits for your needs; box of refill, protractor, set squares, eraser and so on, Clear color allows you to see the words, letters, and figures on page through the protractor & Convenient for organized and carry in transparent box.",
                        price: 53.99,
                        image: "images/geometry_box.jpg",
                        available:5
                    },
                    {
                        id: 6,
                        title: "<b>Maths Set, Geometry Compasses Set 8pcs School Protractor Rulers Set Squares for Maths Learning Home Schooling in Carry Case</b>",
                        description: "Handy and easy to apply; Helpful tools for drawing circles, Drawing Compass suits for your needs; box of refill, protractor, set squares, eraser and so on, Clear color allows you to see the words, letters, and figures on page through the protractor & Convenient for organized and carry in transparent box.",
                        price: 35,
                        image: "images/geometry_box.jpg",
                        available:7
                    },
                ],
                cart : [],
                searchQuery: '',
                sortedProducts:[],
                sortBy:'default',
                name:'',
                phone:'',
            },
            methods:{
                addToCart: function(product){
                    this.cart.push(product.id);
                    product.available--;
                },
                showCheckout() {
                    this.showProduct = this.showProduct ? false : true;
                },
                removeFromCart(product){
                    this.cart.splice(0);
                    product.available++;
                },
                cartCount (id) {
                    let count = 0
                    for (let i = 0; i < this.cart.length; i++) {
                        if (this.cart[i] === id) {
                            count++
                        }
                    }
                    return count
                },
                canAddToCart(product) {
                    return product.available > 0;
                }
            },
            computed:{
                cartItemCount: function(){
                    return this.cart.length || "0";
                },
                showCheckoutButton: function(){
                    return this.cart.length > 0;
                },
                               
            }
        });
    </script>
</body>
</html>